% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/classificationList.R
\name{classificationList}
\alias{classificationList}
\title{List available classification schemes from CELLAR or FAO}
\usage{
classificationList(endpoint = "ALL", showQuery = FALSE)
}
\arguments{
\item{endpoint}{Character string indicating which repository to query.
Must be one of \code{"CELLAR"}, \code{"FAO"} or \code{"ALL"} (the latter
queries both repositories and returns a named list).}

\item{showQuery}{Logical; if \code{TRUE}, the function returns, in addition
to the classification list, the SPARQL query (or queries) used to produce
the result. Defaults to \code{FALSE}.}
}
\value{
If \code{endpoint} is \code{"CELLAR"} or \code{"FAO"} and
\code{showQuery = FALSE}, the function returns a data frame with the
following columns:
\itemize{
  \item \strong{Prefix}: Short identifier of the classification scheme.
  \item \strong{ConceptScheme}: Identifier of the concept scheme
        (derived from the URI).
  \item \strong{URI}: Full URI of the concept scheme.
  \item \strong{Title}: Human-readable English title of the scheme.
  \item \strong{Languages}: Comma-separated list of language tags
        observed for concepts in the scheme.
}

If \code{endpoint} is \code{"CELLAR"} or \code{"FAO"} and
\code{showQuery = TRUE}, the function returns a list with two
elements:
\itemize{
  \item \code{"ClassificationList"}: The data frame described above.
  \item \code{"SPARQL.query"}: The SPARQL query string that was sent
        to the endpoint.
}

If \code{endpoint = "ALL"} and \code{showQuery = FALSE}, the function
returns a named list with two elements, \code{$CELLAR} and \code{$FAO},
each containing a data frame structured as described above.

If \code{endpoint = "ALL"} and \code{showQuery = TRUE}, the function
returns a named list with two elements, \code{$CELLAR} and \code{$FAO};
each of these elements is itself a list with two components:
\code{"ClassificationList"} (the data frame for that endpoint) and
\code{"SPARQL.query"} (the query used to obtain it).
}
\description{
This function extracts, from the endpoint of interest (CELLAR or FAO),
a list of all classifications that are available in that endpoint.
Apart from basic information, the list also contains, for each
classification listed, all elements that are required to parameterise
a SPARQL call to extract the actual classification structure.
These elements include:
\itemize{
  \item the prefix name,
  \item the full URI of the concept scheme,
  \item the concept-scheme identifier (derived from the URI),
  \item the human-readable title (English label),
  \item and the list of languages observed among the concepts belonging
        to the scheme.
}

The function can operate in two modes. By default, it queries live SPARQL
endpoints online. If the global option
\code{options(useLocalDataForVignettes = TRUE)} is set, the function
instead loads embedded CSV files located in \code{inst/extdata} and
bypasses live SPARQL calls, which is useful for vignettes or offline work.

When \code{endpoint = "ALL"}, the function queries both CELLAR and FAO and
returns the two results in a named list. If \code{showQuery = TRUE},
the function also returns the SPARQL query (or queries) used to generate
the output.
}
\details{
The URLs of the SPARQL endpoints are obtained from an online JSON
configuration file (\code{endpoint_source_config.json}). If this file
cannot be loaded, the function falls back to built-in default URLs.

In online mode, languages are inferred from the language tags of the
\code{skos:prefLabel} of all concepts belonging to each scheme. All
distinct languages are returned as a comma-separated character vector.

When operating offline (via
\code{options(useLocalDataForVignettes = TRUE)}), the function returns the
pre-computed CSV data for the requested endpoint(s). This allows vignettes
to be built reproducibly and without network access.
}
\examples{
# --- Offline mode (uses embedded CSVs, no internet required) ---
old_opt <- getOption("useLocalDataForVignettes")
options(useLocalDataForVignettes = TRUE)

# List of available classification schemes in CELLAR (offline)
head(classificationList("CELLAR"))

# List of available classification schemes in FAO (offline)
head(classificationList("FAO"))

# Restore previous option
options(useLocalDataForVignettes = old_opt)

\dontrun{
# --- Online examples (live SPARQL, requires internet connection) ---

# Direct query on CELLAR
head(classificationList("CELLAR"))

# Retrieve SPARQL query for debugging
res <- classificationList("CELLAR", showQuery = TRUE)
names(res)
}

}
